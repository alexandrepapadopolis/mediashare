_format_version: "2.1"
_transform: true

plugins:
  - name: cors
    config:
      origins:
        - "http://localhost:8080"
      methods:
        - "GET"
        - "POST"
        - "PUT"
        - "PATCH"
        - "DELETE"
        - "OPTIONS"
      headers:
        - "Authorization"
        - "apikey"
        - "Content-Type"
        - "X-Client-Info"
        - "Accept"
        - "Accept-Profile"
        - "Content-Profile"
      exposed_headers:
        - "Content-Range"
      credentials: true
      max_age: 3600
      preflight_continue: false

services:
  - name: rest
    url: http://rest:3000
    routes:
      - paths: ["/rest/v1"]

  - name: auth
    url: http://auth:9999
    routes:
      - paths: ["/auth/v1"]

  - name: storage
    url: http://storage:5000
    routes:
      - paths: ["/storage/v1"]
